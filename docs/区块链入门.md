## 区块链入门
&nbsp;&nbsp;&nbsp;&nbsp;这里现在来介绍区块链的相关概念。

### 什么是货币？　　
* 西方经济学的货币定义：货币是任何一种被普遍接受为交易媒介、支付工具、价值储藏和计算单位的物品。货币就是货币行使的职能。

### 虚拟货币
维基百科的定义是：<br>
&nbsp;&nbsp;&nbsp;&nbsp;2014年，欧洲银行业管理局定义其为“并非由央行或政府部门发行的，也不必要与法定货币相关联的一种数码形式的价值，但是它作为一种支付途径被自然人和法人所接受，并可以电子地转账，储存和交易.<br>
&nbsp;&nbsp;&nbsp;&nbsp;在中国大陆是指运行在网络上的货币，知名的虚拟货币如腾讯公司的Q币、盛大公司的点卷，另外网络游戏亦有虚拟货币.<br>
类别：<br>
虚拟货币大致上可以分成三类。<br>
第一类<br>
与实体货币无关，只可以在封闭的虚拟环境中使用，通常是网络游戏，如魔兽世界。<br>
第二类<br>
单向兑换，通常只可以在虚拟环境中使用，有时候也可以购买实体商品和服务，如飞行常客奖励计划、微软积分、任天堂点数、Facebook Credits、Amazon Coin。<br>
第三类<br>
双向兑换，有买入价和卖出价，跟“真”货币相同，包括由发行机构发行的，如第二人生的林登币、可双向兑换的游戏币……等等，以及去中心化的加密货币，如比特币、莱特币、以太坊属于此类，媒体多以"虚拟货币"一词指称，但加密货币只是虚拟货币中其中一个子类别而已。<br>

### 加密货币
加密货币（英文：Cryptocurrency，又译密码货币，密码学货币）是一种使用密码学原理来确保交易安全及控制交易单位创造的交易媒介。 加密货币是数字货币（或称虚拟货币）的一种 。比特币在2009年成为第一个去中心化的加密货币，这之后加密货币一词多指此类设计。 自此之后数种类似的加密货币被创造，它们通常被称作altcoins。 加密货币基于去中心化的共识机制 ，与依赖中心化监管体系的银行金融系统相对。

### 记账
* 从广义讲，就是随时间先后，所有发生收付、进出变化连续记录起来，供记录者翻阅查看了解。

### 分布式账本技术
中心化的账本管理技术，导致有人可能或篡改账本信息，或者记错账本信息；
人人参与的记账方式，去中心化的记账方式，防止账本数据被篡改，或者记错账的事情发生；

### 分布式记账的重要性
分布式记账的重要性<br>
分布式记账问题为何重要？可以类比互联网出现后对社会带来的重大影响。

互联网是人类历史上最大的分布式互联系统。作为信息社会的基础设施，它很好地解决了传递信息的问题。然而，由于早期设计上的缺陷，互联网无法确保所传递信息的可靠性，这大大制约了人们利用互联网进行大规模协作的能力。而以区块链为基础的分布式账本科技则可能解决传递可信信息的问题。这意味着基于分布式账本科技的未来商业网络，将成为新一代的文明基础设施——大规模的协作网络。

分布式账本科技的核心价值在于为未来多方协同网络提供可信基础。区块链引发的记账科技的演进，将促使商业协作和组织形态发生变革。

### 什么是区块链
从分布式记账问题说起<br>
分布式记账问题由来已久。自以电子计算机为主要记账手段的数字化账本诞生以来，商业活动参与者首先要寻找一个多方均能信任的第三方来记账，确保交易记录的准确。然而，随着商业活动的规模越来越大，商业过程愈加动态和复杂，很多场景下难以找到符合要求的第三方记账方（例如供应链领域动辄涉及来自多个行业的数百家参与企业）。这就需要交易各方探讨在多方分布式场景下进行协同记账的可能性。<br>

实际上，可以很容易设计出一个简单粗暴的分布式记账结构。多方均允许对账本进行任意读写，一旦发生新的交易即追加到账本上。这种情况下，如果参与多方均诚实可靠，则该方案可以正常工作；但是一旦有参与方恶意篡改已发生过的记录，则无法确保账本记录的正确性。<br>

方案（一）：简单分布式记账结构<br>
为了防止有参与者对交易记录进行篡改，需要引入一定的验证机制。很自然地，可以借鉴信息安全领域的数字摘要（Digital Digest）技术，从而改进为方案（二）。每次当有新的交易记录被追加到账本上时，参与各方可以使用 Hash 算法对完整的交易历史计算数字摘要，获取当前交易历史的“指纹”。此后任意时刻，每个参与方都可以对交易历史重新计算数字摘要，一旦发现指纹不匹配，则说明交易记录被篡改过。同时，通过追踪指纹改变位置，可以定位到被篡改的交易记录。<br>

方案（二）：带有数字摘要验证的分布式记账<br>
方案（二）可以解决账本记录防篡改的问题，然而在实际生产应用时，仍存在较大缺陷。由于每次追加新的交易记录时需要从头对所有的历史数据计算数字摘要，当已存在大量交易历史时，数字摘要计算成本将变得很高。而且，随着新交易的发生，计算耗费将越来越大，系统扩展性很差。<br>

为了解决可扩展性的问题，需要进一步改进为方案（三）。注意到任何一次摘要实际上已经确保了从头开始到摘要位置的完整历史，当新的交易发生后，实际上需要进行增加验证的只是新的交易，即增量部分。因此，计算摘要的过程可以改进为对旧的摘要值再加上新的交易内容进行验证。这样就既解决了防篡改问题，又解决了可扩展性问题。<br>

方案（三）：带有数字摘要验证的可扩展的分布式记账
实际上，读者可能已经注意到，方案（三）中的账本结构正是一个区块链结构图。可见，从分布式记账的基本问题出发，可以自然推导出区块链结构，这也说明了在分布式场景下的记账问题中，区块链结构是一个简洁有效的天然答案。

### 区块链技术可以提供天然可信的分布式账本平台，不需要额外第三方中介机构参与

### 区块链的本质原理是什么
首先包括三个概念：

* 交易： 一次对账本的操作，导致账本状态的一次改变，如添加一条转账记录；
* 区块：记录一段时间内发生的所有交易和状态结果，是对当前账本状态的一次共识；
* 链：由区块按照发生顺序串联而成，是整个账本状态变化的日志记录。

我们以比特币为例来介绍：

1、首先，比特币客户端会发起一项比特币交易，并把它广播到比特币网络中等待确认;<br>
2、网络中的一些网络中的一些节点会将收到的等待确认的交易记录打包到一起包括前一个区块头部的额一些信息，组成一个候选区块（这里会将哪些交易信息打包，是按照交易者提供的gas 的多少来做的）；<br>
3、然后，尝试去找一个随机串放到区块中，使得候选区块的哈希满足一定的条件；<br>
4、一旦节点算出来满足条件的随机串，这个区块将被认为是”合法“了，就可以尝试在网络中将它广播出去，其它节点收到候选区块，进行验证，发现确实满足约定条件，就承认这个区块是合法的新区块，并添加到自己维护的新区快上；当大部分节点都将区块添加到自己维护的区块链结构上时，该区块被网络接受，区块中所包括的交易也就得到确认。<br><br>
比特币的这种基于算力寻找 nonce 串的共识机制被称为工作量证明（Proof of Work，PoW）。目前，要让哈希结果满足一定条件，并无已知的快速启发式算法，只能进行逐个尝试的暴力计算。尝试的次数越多（工作量越大），算出来的概率越大。

### 区块链的相关概念
### 节点

* 常规节点的分类：
官方参考实现的节点同时具备路由、区块链存储、挖矿和钱包这四个模块。根据节点在区块链网络中扮演的角色和自生侧重功能的不同（当然，也有简单出于效率和成本的考虑），有些节点会缺少其中的一个或几个模块。也正是因为节点自我定位的不一样，造就了节点有着一些不一样的分工和使用场景。<br>

### 挖矿

### 矿池
众所周知由于全网算力指数级的上涨，独立矿工节点（solo miner）挖到区块获得奖励的概率在今天来看来几乎不太可能，独立矿工需要事先投入巨额的资源才有机会加入到“矿工俱乐部”，包括还不限于大容量的区块链存储空间、费神费力的运维成本以及逐年上涨的电力费用等等。基于上述种种现状考虑，技术极客就提出了矿池（mining pool）的概念 —— 一种将少量算力联合计算挖矿的组织方式。在这种机制下，个体不管算力的多少、不需要大容量存储空间，通过某种矿池协议（比如：Stratum）就加入到矿池组织中进行挖矿。通过与矿池签订“契约”之后，矿工们能够根据贡献的算力多少，每天稳定获得一定数量的收益，而不再需要等到真正挖到一个区块才能获得奖励。<br>

矿池概念的引入，解决了我一开始研究比特币和区块链的一个困惑 —— 都说挖矿需要事先同步好几十个GB的历史数据，硬盘肯定是少不了的，但是为什么现在一台裸的显卡或者ASIC芯片就能开始挖矿呢？<br>

池协议服务节点中除了用于挖矿的Stratum协议之外，还十分依赖P2P协议连接到一个或多个完整区块链节点，间接实现访问一个区块链完整副本的目的。
抽象的来说，矿池可以想象成在比特币的主网中开辟了一个黑盒的子网络，矿池通过在这个子网络中设置一个比主网挖矿难度小1000倍以上的 Difficulty，挖矿节点挖的是一个类比特币/区块、但名叫“份额”的东西，这套机制能够保证了子网络中的挖矿节点有较大概率挖到一个“份额”。



我们还是拿掷骰子为例，比特币的网络要求节点掷到小于等于数字 ② 赢得整个比赛，并获得（比特币）奖励；但是矿池只要求节点掷到小于等于数字 ⑤ 就可以赢得小组内的比赛，获得（份额）奖励。所以，当一个挖矿节点掷到数字 ④，尽管他并没有通过完成更高难度的比赛来赢得更大的奖励，但至少他可以以较低的成本获得了这个矿池奖励给他的“份额”。与此同时，对于矿池中所有节点的累加，总是有较大的概率其中的一个节点掷到数字 ① 或者 ②，那么，对于矿池来说，矿池作为一个整体它就赢得整个比赛和（比特币）奖励。显然，最终“份额”与“比特币”之间会存在某种经济模型的兑换，这里就不再做更多赘述。

### 矿场
如果说矿场是一个比特币挖矿硬件设备的集合，那么矿池则是矿工们算力的集合。
### 钱包

* 钱包的职能： 钱包模块主要功能是用于管理节点的私钥、资产以及进行交易行为等。(个人以后可能会有两个钱包，一个是实体的钱包，另外一个就是数字化钱包)<br> 
* 我们可以把钱包分成：全节点钱包、轻钱包、中心化钱包。<br>

### Coins 和 token 的区别
* Coins是具备货币属性的区块链项目的货币，这些区块链项目都是基础链，Coins是这些基础链的“法币”集合统称。我们可以理解成：凡是将建立自己基础链的项目，它们发行的链币（基础链币，也可以叫原生币）属于Coins，带有“法币”的性质；

* Tokens是具备权益凭证属性的区块链应用项目的代币，这些区块链应用项目都是在基础链上发展出来的，具有特定应用场景的DAPP或者智能合约等，Tokens是这些应用链的“代币”集合统称。我们可以理解成：凡是建立在基础链上面的应用项目，它们发行的代币（应用代币）属于Tokens，带有“权益凭证”的属性。

### 挑战
* 分布式共识算法
* 交易性能
* 扩展性
* 安全防护
* 数据库和存储系统
* 集成和运营




